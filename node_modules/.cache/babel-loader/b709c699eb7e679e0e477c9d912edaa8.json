{"ast":null,"code":"import _objectSpread from\"D:/Code/Python DJANGO/taskboard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:/Code/Python DJANGO/taskboard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Code/Python DJANGO/taskboard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Code/Python DJANGO/taskboard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Code/Python DJANGO/taskboard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import $ from\"jquery\";import Title from\"./components/title\";import Main from\"./components/main\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.add_new_task_in_state=function(data){var tasks=_objectSpread({},_this.state.tasks);tasks[\"task\".concat(Date.now())]=data;_this.setState({tasks:tasks});};_this.get_user_tasks=function(url){var token=\"Token \"+localStorage.getItem(\"user_token\");axios({method:\"get\",url:url,headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:token}}).then(function(response){_this.setState({tasks:response.data});});};_this.get_send_request=function(url){var token=\"Token \"+localStorage.getItem(\"user_token\");axios({method:\"get\",url:url,headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:token}}).then(function(response){_this.setState({login:response.data.username});});};_this.login_user_func=function(login,password){var url=\"https://taskboard.pythonanywhere.com/auth/token/login/\";var data={username:login,password:password};axios({method:\"post\",url:url,data:data,config:{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}}}).then(function(response){_this.setState({auth:true,login_errors:false});localStorage.setItem(\"user_token\",response.data.auth_token);_this.get_send_request(\"https://taskboard.pythonanywhere.com/auth/users/me\");_this.get_user_tasks('https://taskboard.pythonanywhere.com/api/v1/list/tasks/');}).catch(function(error){_this.setState({login_errors:true});});};_this.logout_user=function(e){e.preventDefault();var url='https://taskboard.pythonanywhere.com/auth/token/logout/';var token=\"Token \"+localStorage.getItem(\"user_token\");axios({method:\"post\",url:url,headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:token}}).then(function(response){console.log('good');localStorage.removeItem('user_token');_this.setState({auth:false,login:''});});};_this.state={auth:false,login:\"\",login_errors:false,tasks:{}};return _this;}_createClass(App,[{key:\"componentWillMount\",value:function componentWillMount(){var token=\"Token \"+localStorage.getItem(\"user_token\");if(token!=\"Token null\"){this.setState({auth:true});this.get_send_request(\"https://taskboard.pythonanywhere.com/auth/users/me\");this.get_user_tasks('https://taskboard.pythonanywhere.com/api/v1/list/tasks/');}}},{key:\"componentDidMount\",value:function componentDidMount(){$(document).delegate(\"#add_task_button\",\"click\",function(){$(\"#content\").children().css(\"display\",\"none\");$(\".task_add_form\").slideToggle(\"slow\");});// $(\"#add_task_button\").click(() => {\n//   $(\"#content\").children().css(\"display\", \"none\");\n//   $(\".task_add_form\").slideToggle(\"slow\");\n// });\n$(document).delegate(\"#register_button\",\"click\",function(){$(\"#content\").children().css(\"display\",\"none\");$(\".register_form\").slideToggle();return false;});// $(\"#register_button\").click(function () {\n//   $(\"#content\").children().css(\"display\", \"none\");\n//   $(\".register_form\").slideToggle();\n//   return false;\n// });\n$(document).delegate(\"#login_button\",\"click\",function(){$(\"#content\").children().css(\"display\",\"none\");$(\".login_form\").slideToggle();return false;});// $(\"#login_button\").click(function () {\n//   $(\"#content\").children().css(\"display\", \"none\");\n//   $(\".login_form\").slideToggle();\n//   return false;\n// });\n$(document).delegate(\"#logout_user\",\"click\",function(){$(\"#content\").children().css(\"display\",\"none\");return false;});// $(document).delegate('.task_card', 'click', () => {\n//   $('#content').children().css('display', 'none')\n// })\n}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Title,{}),/*#__PURE__*/_jsx(Main,{login_user_func:this.login_user_func,logout_user_func:this.logout_user,auth:this.state.auth,username:this.state.login,login_errors:this.state.login_errors,add_new_task_in_state:this.add_new_task_in_state,get_user_tasks:this.get_user_tasks,tasks:this.state.tasks})]});}}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["D:/Code/Python DJANGO/taskboard/frontend/src/App.js"],"names":["React","Component","axios","$","Title","Main","App","props","add_new_task_in_state","data","tasks","state","Date","now","setState","get_user_tasks","url","token","localStorage","getItem","method","headers","Accept","Authorization","then","response","get_send_request","login","username","login_user_func","password","config","auth","login_errors","setItem","auth_token","catch","error","logout_user","e","preventDefault","console","log","removeItem","document","delegate","children","css","slideToggle"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport $ from \"jquery\";\nimport Title from \"./components/title\";\nimport Main from \"./components/main\";\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      auth: false,\n      login: \"\",\n      login_errors: false,\n      tasks: {}\n    };\n  }\n\n  componentWillMount() {\n    let token = \"Token \" + localStorage.getItem(\"user_token\");\n    if (token != \"Token null\") {\n      this.setState({ auth: true });\n      this.get_send_request(\"https://taskboard.pythonanywhere.com/auth/users/me\");\n      this.get_user_tasks('https://taskboard.pythonanywhere.com/api/v1/list/tasks/')\n    }\n  }\n\n  add_new_task_in_state = (data) => {\n    const tasks = {...this.state.tasks}\n    tasks[`task${Date.now()}`] = data\n    this.setState({tasks})\n  }\n\n  get_user_tasks = (url) => {\n    let token = \"Token \" + localStorage.getItem(\"user_token\");\n    axios({\n      method: \"get\",\n      url: url,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: token,\n      },\n    }).then((response) => {\n      this.setState({tasks: response.data})\n    })\n\n  }\n\n  get_send_request = (url) => {\n    let token = \"Token \" + localStorage.getItem(\"user_token\");\n    axios({\n      method: \"get\",\n      url: url,\n\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: token,\n      },\n    }).then((response) => {\n      this.setState({ login: response.data.username });\n    });\n  };\n\n  login_user_func = (login, password) => {\n    let url = \"https://taskboard.pythonanywhere.com/auth/token/login/\";\n    let data = { username: login, password: password };\n\n    axios({\n      method: \"post\",\n      url: url,\n      data: data,\n      config: {\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      },\n    })\n      .then((response) => {\n        this.setState({ auth: true, login_errors: false });\n        localStorage.setItem(\"user_token\", response.data.auth_token);\n        this.get_send_request(\"https://taskboard.pythonanywhere.com/auth/users/me\");\n        this.get_user_tasks('https://taskboard.pythonanywhere.com/api/v1/list/tasks/')\n      })\n      .catch((error) => {\n        this.setState({login_errors: true})\n      });\n  };\n\n  logout_user = (e) => {\n    e.preventDefault();\n    const url = 'https://taskboard.pythonanywhere.com/auth/token/logout/'\n    let token = \"Token \" + localStorage.getItem(\"user_token\");\n    axios({\n      method: \"post\",\n      url: url,\n      \n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: token,\n\n        },\n      },\n    ).then((response) => {\n      console.log('good')\n      localStorage.removeItem('user_token')\n      this.setState({auth: false, login: ''})\n\n    })\n  };\n\n  componentDidMount() {\n\n    $( document ).delegate( \"#add_task_button\", \"click\", () => {\n      $(\"#content\").children().css(\"display\", \"none\");\n      $(\".task_add_form\").slideToggle(\"slow\");\n    });\n    // $(\"#add_task_button\").click(() => {\n    //   $(\"#content\").children().css(\"display\", \"none\");\n    //   $(\".task_add_form\").slideToggle(\"slow\");\n    // });\n    $( document ).delegate( \"#register_button\", \"click\", () => {\n      $(\"#content\").children().css(\"display\", \"none\");\n      $(\".register_form\").slideToggle();\n      return false;\n    });\n    \n\n    // $(\"#register_button\").click(function () {\n    //   $(\"#content\").children().css(\"display\", \"none\");\n    //   $(\".register_form\").slideToggle();\n    //   return false;\n    // });\n    $( document ).delegate( \"#login_button\", \"click\", () => {\n      $(\"#content\").children().css(\"display\", \"none\");\n      $(\".login_form\").slideToggle();\n      return false;\n    });\n\n    // $(\"#login_button\").click(function () {\n    //   $(\"#content\").children().css(\"display\", \"none\");\n    //   $(\".login_form\").slideToggle();\n    //   return false;\n    // });\n\n    $( document ).delegate( \"#logout_user\", \"click\", () => {\n      $(\"#content\").children().css(\"display\", \"none\");\n      return false;\n    });\n\n    // $(document).delegate('.task_card', 'click', () => {\n    //   $('#content').children().css('display', 'none')\n    // })\n  }\n\n  render() {\n    return (\n      <>\n        <Title />\n        <Main\n          login_user_func={this.login_user_func}\n          logout_user_func={this.logout_user}\n          auth={this.state.auth}\n          username={this.state.login}\n          login_errors={this.state.login_errors}\n          add_new_task_in_state={this.add_new_task_in_state}\n          get_user_tasks={this.get_user_tasks}\n          tasks={this.state.tasks}\n        />\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}